---
phase: 01-foundation
plan: 02
type: execute
wave: 2
depends_on: [01-01]
files_modified:
  - convex/schema.ts
  - app/ConvexClientProvider.tsx
  - app/layout.tsx
  - app/page.tsx
  - app/about/page.tsx
  - app/resume/page.tsx
  - app/projects/page.tsx
  - app/stack/page.tsx
  - app/contact/page.tsx
  - components/navigation/Header.tsx
  - .env.local
autonomous: false

must_haves:
  truths:
    - "Developer can run npx convex dev and connect to local backend"
    - "All pages display dark theme with proper contrast"
    - "Navigation header shows correct links and highlights active page"
    - "Layout is responsive on mobile (375px) and desktop (1440px+)"
    - "Convex schema defines all required tables for project"
  artifacts:
    - path: "convex/schema.ts"
      provides: "Database schema for projects, resume, changelog, contactSubmissions"
      min_lines: 50
      exports: ["default schema"]
    - path: "app/ConvexClientProvider.tsx"
      provides: "Convex React provider for client-side queries"
      contains: "ConvexProvider"
    - path: "app/layout.tsx"
      provides: "Root layout with dark theme and Convex provider"
      contains: "className=\"dark\""
    - path: "components/navigation/Header.tsx"
      provides: "Responsive navigation with active state"
      contains: "usePathname"
      min_lines: 40
  key_links:
    - from: "app/layout.tsx"
      to: "app/ConvexClientProvider.tsx"
      via: "wraps children with ConvexProvider"
      pattern: "<ConvexClientProvider>"
    - from: "app/layout.tsx"
      to: "app/globals.css"
      via: "import statement"
      pattern: "import.*globals\\.css"
    - from: "app/layout.tsx"
      to: "dark theme"
      via: "className on html tag"
      pattern: "<html.*className=\"dark\""
    - from: "components/navigation/Header.tsx"
      to: "active route detection"
      via: "usePathname hook"
      pattern: "usePathname\\(\\)"
---

<objective>
Initialize Convex backend with database schema and create responsive dark-themed layout with navigation across all pages.

Purpose: Establish the backend data layer and UI foundation that enables content management and consistent user experience. This completes the infrastructure needed for public content pages in Phase 2.

Output: Working Convex backend with defined schema, dark-themed responsive layout, and functional navigation header accessible on all routes.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Convex with complete database schema</name>
  <files>
    convex/schema.ts
    convex/_generated/
    .env.local
    app/ConvexClientProvider.tsx
  </files>
  <action>
Install Convex:
```bash
npm install convex
```

Initialize Convex project:
```bash
npx convex dev
```

**Important:** This command is interactive and will:
1. Open browser for authentication (sign in with GitHub or Google)
2. Create new Convex project
3. Generate `.env.local` with `NEXT_PUBLIC_CONVEX_URL`
4. Create `convex/` directory with `_generated/` files
5. Start dev server watching for schema changes

After initialization completes, create `convex/schema.ts` with all four tables from RESEARCH.md:

```typescript
import { defineSchema, defineTable } from "convex/server";
import { v } from "convex/values";

export default defineSchema({
  projects: defineTable({
    title: v.string(),
    slug: v.string(),
    summary: v.string(),
    content: v.string(),
    status: v.union(v.literal("draft"), v.literal("published")),
    featured: v.boolean(),
    stack: v.array(v.string()),
    tags: v.array(v.string()),
    links: v.array(v.object({
      label: v.string(),
      url: v.string(),
    })),
    screenshots: v.array(v.string()),
  })
    .index("by_slug", ["slug"])
    .index("by_status", ["status"])
    .index("by_featured", ["featured", "status"]),

  resume: defineTable({
    highlights: v.array(v.string()),
    experience: v.array(v.object({
      role: v.string(),
      company: v.string(),
      period: v.string(),
      description: v.string(),
      achievements: v.array(v.string()),
    })),
    education: v.array(v.object({
      degree: v.string(),
      institution: v.string(),
      year: v.string(),
    })),
    skills: v.array(v.object({
      category: v.string(),
      items: v.array(v.string()),
    })),
  }),

  changelog: defineTable({
    date: v.string(),
    title: v.string(),
    summary: v.string(),
    prNumber: v.optional(v.number()),
    commitSha: v.optional(v.string()),
    type: v.union(
      v.literal("feature"),
      v.literal("fix"),
      v.literal("chore")
    ),
    visible: v.boolean(),
  }).index("by_date", ["date"]),

  contactSubmissions: defineTable({
    name: v.string(),
    email: v.string(),
    message: v.string(),
    status: v.union(v.literal("new"), v.literal("archived")),
    submittedAt: v.string(),
  }).index("by_status", ["status"]),
});
```

Create `app/ConvexClientProvider.tsx`:
```typescript
"use client";

import { ConvexProvider, ConvexReactClient } from "convex/react";
import { ReactNode } from "react";

const convex = new ConvexReactClient(process.env.NEXT_PUBLIC_CONVEX_URL!);

export function ConvexClientProvider({ children }: { children: ReactNode }) {
  return <ConvexProvider client={convex}>{children}</ConvexProvider>;
}
```

**Critical notes:**
- Convex dev server must stay running in background (it watches schema.ts for changes)
- Environment variable MUST have `NEXT_PUBLIC_` prefix (browser access required)
- Schema indexes are required for any field used in .filter() or .withIndex() queries
- DO NOT commit `convex/_generated/` (auto-generated, already in .gitignore)

**Why these indexes:**
- `by_slug`: Project detail pages query by slug (e.g., /projects/[slug])
- `by_status`: Public pages filter for published projects only
- `by_featured`: Home page fetches featured projects
- `by_date`: Changelog ordered chronologically
- `by_status` (contactSubmissions): Admin views new vs archived submissions
  </action>
  <verify>
Run `npx convex dev` and confirm:
- Authentication succeeds and project is created
- Console shows "Convex functions ready" with no schema errors
- `.env.local` contains `NEXT_PUBLIC_CONVEX_URL=https://...`
- `convex/_generated/` directory exists with auto-generated files

Check Convex dashboard (URL shown in terminal):
- All four tables appear (projects, resume, changelog, contactSubmissions)
- Indexes are created (by_slug, by_status, by_featured, by_date)

Test ConvexClientProvider by importing in layout (next task) and ensuring no runtime errors.
  </verify>
  <done>
Convex backend is connected and schema is deployed with all four tables (projects, resume, changelog, contactSubmissions) and required indexes. ConvexClientProvider is ready to wrap the app.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create root layout with dark theme and Convex provider</name>
  <files>
    app/layout.tsx
    app/page.tsx
    app/about/page.tsx
    app/resume/page.tsx
    app/projects/page.tsx
    app/stack/page.tsx
    app/contact/page.tsx
  </files>
  <action>
Update `app/layout.tsx` to include dark theme, Convex provider, and navigation:

```typescript
import type { Metadata } from 'next'
import { ConvexClientProvider } from './ConvexClientProvider'
import { Header } from '@/components/navigation/Header'
import './globals.css'

export const metadata: Metadata = {
  title: {
    default: 'Portfolio',
    template: '%s | Portfolio',
  },
  description: 'Personal portfolio showcasing projects and engineering automation',
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en" className="dark">
      <body className="bg-gray-950 text-gray-50 antialiased min-h-screen">
        <ConvexClientProvider>
          <Header />
          <main className="container mx-auto px-4 py-8">
            {children}
          </main>
        </ConvexClientProvider>
      </body>
    </html>
  )
}
```

Create placeholder page files for all routes (required for navigation to work):

**app/page.tsx (Home):**
```typescript
export default function HomePage() {
  return (
    <div>
      <h1 className="text-4xl font-bold mb-4">Welcome</h1>
      <p className="text-gray-300">Home page - content coming in Phase 2</p>
    </div>
  )
}
```

**app/about/page.tsx:**
```typescript
export default function AboutPage() {
  return (
    <div>
      <h1 className="text-4xl font-bold mb-4">About</h1>
      <p className="text-gray-300">About page - content coming in Phase 2</p>
    </div>
  )
}
```

**app/resume/page.tsx:**
```typescript
export default function ResumePage() {
  return (
    <div>
      <h1 className="text-4xl font-bold mb-4">Resume</h1>
      <p className="text-gray-300">Resume page - content coming in Phase 2</p>
    </div>
  )
}
```

**app/projects/page.tsx:**
```typescript
export default function ProjectsPage() {
  return (
    <div>
      <h1 className="text-4xl font-bold mb-4">Projects</h1>
      <p className="text-gray-300">Projects page - content coming in Phase 2</p>
    </div>
  )
}
```

**app/stack/page.tsx:**
```typescript
export default function StackPage() {
  return (
    <div>
      <h1 className="text-4xl font-bold mb-4">Stack/Automation</h1>
      <p className="text-gray-300">Stack page - diagrams coming in Phase 2</p>
    </div>
  )
}
```

**app/contact/page.tsx:**
```typescript
export default function ContactPage() {
  return (
    <div>
      <h1 className="text-4xl font-bold mb-4">Contact</h1>
      <p className="text-gray-300">Contact form coming in Phase 3</p>
    </div>
  )
}
```

**Critical points:**
- Root layout MUST have `<html>` and `<body>` tags (Next.js App Router requirement)
- Dark theme applied via `className="dark"` on `<html>` element
- ConvexClientProvider wraps all children to enable Convex queries throughout app
- Navigation imports Header component (created in next task)
- All pages are Server Components (no "use client" needed for these placeholders)
- Responsive container with proper padding ensures mobile/desktop compatibility

**Why these specific classes:**
- `bg-gray-950 text-gray-50`: Dark background + light text from custom theme
- `antialiased`: Smooth font rendering
- `min-h-screen`: Full viewport height
- `container mx-auto px-4 py-8`: Responsive container with gutters
  </action>
  <verify>
Run `npm run dev` and visit localhost:3000, confirm:
- Dark theme is applied (dark background, light text)
- No console errors about ConvexClientProvider
- Page renders with proper spacing and typography
- Visiting /about, /resume, /projects, /stack, /contact shows placeholder content

Check browser DevTools:
- Verify dark theme classes are applied to html element
- Confirm Tailwind utility classes are rendering correctly
- Check for any React hydration errors (should be none)
  </verify>
  <done>
Root layout applies dark theme consistently, ConvexClientProvider wraps the app without errors, all route placeholders exist and render correctly, and the layout is ready for navigation component.
  </done>
</task>

<task type="auto">
  <name>Task 3: Build responsive navigation header with active state</name>
  <files>
    components/navigation/Header.tsx
  </files>
  <action>
Create `components/navigation/Header.tsx`:

```typescript
"use client"

import Link from 'next/link'
import { usePathname } from 'next/navigation'

const navLinks = [
  { href: '/', label: 'Home' },
  { href: '/about', label: 'About' },
  { href: '/resume', label: 'Resume' },
  { href: '/projects', label: 'Projects' },
  { href: '/stack', label: 'Stack' },
  { href: '/contact', label: 'Contact' },
]

export function Header() {
  const pathname = usePathname()

  return (
    <header className="border-b border-gray-800 bg-gray-950 sticky top-0 z-50 backdrop-blur">
      <div className="container mx-auto px-4 py-4">
        <nav className="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
          <Link
            href="/"
            className="text-xl font-bold text-white hover:text-gray-300 transition-colors"
          >
            Portfolio
          </Link>

          <ul className="flex flex-wrap gap-4 md:gap-6">
            {navLinks.map((link) => {
              const isActive = pathname === link.href
              return (
                <li key={link.href}>
                  <Link
                    href={link.href}
                    className={`transition-colors hover:text-gray-300 ${
                      isActive
                        ? 'text-white font-semibold border-b-2 border-white'
                        : 'text-gray-400'
                    }`}
                  >
                    {link.label}
                  </Link>
                </li>
              )
            })}
          </ul>
        </nav>
      </div>
    </header>
  )
}
```

**Critical implementation details:**
- Mark as Client Component with `"use client"` (required for usePathname hook)
- Use `usePathname()` to detect current route (automatically tracks navigation)
- Active link styling: white text + bold + bottom border
- Inactive link styling: gray text with hover effect
- Responsive layout: stacked on mobile, horizontal on desktop (md: breakpoint)
- Sticky positioning: header stays at top on scroll
- Backdrop blur: subtle effect for depth

**Why mobile-first approach:**
- `flex flex-col gap-4`: Mobile base layout (vertical stacking)
- `md:flex-row md:items-center`: Desktop override (horizontal layout at 768px+)
- Unprefixed utilities target 0px+, prefixed target breakpoint+ (Tailwind v4 mobile-first)

**Why sticky header:**
- Navigation accessible at all scroll positions
- Common UX pattern for portfolios
- z-50 ensures it stays above content

**Why "use client":**
- `usePathname()` is a React hook, only works in Client Components
- Next.js will error if hook used in Server Component
- Navigation naturally needs client-side interactivity for active state
  </action>
  <verify>
Run `npm run dev` and test at localhost:3000:
1. Header appears at top of every page
2. Active page link is highlighted (white, bold, underline)
3. Clicking nav links updates active state correctly
4. Hover effects work on all links
5. Resize browser to mobile width (375px) - nav should stack vertically
6. Resize to desktop (1440px+) - nav should be horizontal
7. Scroll down page - header should stick to top

Browser DevTools checks:
- Verify usePathname returns correct path
- Check responsive classes apply at correct breakpoints (inspect element)
- Confirm no hydration errors (common with client components)
  </verify>
  <done>
Navigation header appears on all pages with correct links, active page is highlighted, responsive layout works on mobile and desktop viewports, and header sticks to top on scroll.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete foundation infrastructure: Convex backend with schema, dark-themed responsive layout, and navigation header across all routes.
  </what-built>
  <how-to-verify>
**Start both development servers:**
1. Terminal 1: `npm run dev` (Next.js dev server)
2. Terminal 2: `npx convex dev` (Convex backend)

**Verification steps:**

**1. Convex Backend:**
- Visit Convex dashboard URL (shown in terminal)
- Confirm all 4 tables exist: projects, resume, changelog, contactSubmissions
- Verify indexes are created for each table

**2. Dark Theme:**
- Visit http://localhost:3000
- Confirm dark background (#0a0a0b or similar gray-950)
- Confirm light text (#fafafa or similar gray-50)
- Check contrast is readable (text clearly visible)

**3. Navigation:**
- Click through all nav links: Home, About, Resume, Projects, Stack, Contact
- Verify each link highlights when active (white + bold + underline)
- Verify inactive links are gray with hover effect

**4. Responsive Layout:**
- Desktop (1440px): Nav links horizontal, proper spacing
- Mobile (375px): Nav links stacked vertically, touch-friendly
- Test by resizing browser window or using DevTools device toolbar

**5. Sticky Header:**
- Scroll down any page
- Confirm header stays at top (sticky positioning works)

**6. Build Verification:**
- Run `npm run build` in separate terminal
- Confirm build succeeds with no errors
- Look for: "✓ Compiled successfully"

**Expected behavior:**
- All pages render with dark theme
- Navigation is functional and responsive
- No console errors in browser or terminal
- Convex connection active (no "connection failed" errors)
  </how-to-verify>
  <resume-signal>
Type "approved" if all checks pass, or describe any issues found (styling problems, broken links, console errors, responsive layout issues).
  </resume-signal>
</task>

</tasks>

<verification>
**Overall Phase Checks:**
1. Both `npm run dev` and `npx convex dev` run without errors
2. All 5 requirements complete:
   - FOUND-01: Next.js 16 + TypeScript ✓ (Plan 01)
   - FOUND-02: Tailwind v4 with dark theme ✓ (Plan 01 + 02)
   - FOUND-03: Convex with schema ✓ (Plan 02)
   - FOUND-04: Responsive layout ✓ (Plan 02)
   - FOUND-05: Navigation header ✓ (Plan 02)
3. Visit all routes (/, /about, /resume, /projects, /stack, /contact) - no 404s
4. Test on mobile (375px) and desktop (1440px) - layout adapts correctly
5. Check Convex dashboard - all tables and indexes present
6. Run `npm run build` - production build succeeds
7. Check git status - no uncommitted changes to critical files
</verification>

<success_criteria>
**Measurable Completion:**
- [ ] Convex backend connected with all 4 tables and indexes deployed
- [ ] Dark theme applies to all pages with proper contrast
- [ ] Navigation header shows on all pages with active state working
- [ ] Layout is responsive on mobile (375px) and desktop (1440px+)
- [ ] Human verified: dark theme, navigation, responsive layout work correctly
- [ ] `npm run build` completes successfully
- [ ] All files committed to git with clear commit messages

**Ready for Phase 2 when:**
- Infrastructure is solid and tested
- Public content pages can be built on this foundation
- No blocking issues with Convex, styling, or navigation
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md` following the summary template.
</output>
